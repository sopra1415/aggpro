<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="de"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Administrate.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;AGG_Pro&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">View.MainFrame.OperatingPanes</a> &gt; <span class="el_source">Administrate.java</span></div><h1>Administrate.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package View.MainFrame.OperatingPanes;

import Data.LiveClasses.*;
import View.InputPanes.ManipulateParticipant;
import View.MainFrame.MainFrame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;


/**
 *
 * @author Heiko Geppert
 */
public class Administrate extends javax.swing.JPanel {

    

    private MainFrame main;
    private Event actualEvent;
    private DefaultTableModel tableParticipantTableModel ;
    
    /**
     * Creates new form Participant
     */
<span class="nc" id="L39">    public Administrate(MainFrame main) {</span>
<span class="nc" id="L40">        this.main = main;</span>
<span class="nc" id="L41">        this.actualEvent = main.getActualEvent();</span>
<span class="nc" id="L42">        initComponents();</span>
<span class="nc" id="L43">        initTable();</span>
<span class="nc" id="L44">        initListeners();</span>
<span class="nc" id="L45">    }</span>
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
    private void initComponents() {

<span class="nc" id="L56">        panelTable = new javax.swing.JPanel();</span>
<span class="nc" id="L57">        paneTableScrollPane = new javax.swing.JScrollPane();</span>
<span class="nc" id="L58">        tableParticipant = new javax.swing.JTable();</span>
<span class="nc" id="L59">        btnNewParticipant = new javax.swing.JButton();</span>
<span class="nc" id="L60">        btnDeleteParticipant = new javax.swing.JButton();</span>
<span class="nc" id="L61">        btnEditParticipant = new javax.swing.JButton();</span>

<span class="nc" id="L63">        panelTable.setPreferredSize(new java.awt.Dimension(610, 408));</span>

<span class="nc" id="L65">        tableParticipant.setModel(new javax.swing.table.DefaultTableModel(</span>
            new Object [][] {

            },
            new String [] {
                &quot;Startnummer&quot;, &quot;Name&quot;, &quot;Vorname&quot;, &quot;Nickname&quot;, &quot;Bezahlt&quot;, &quot;Anwesend&quot;, &quot;Angemeldete Turniere&quot;
            }
<span class="nc" id="L72">        ) {</span>
<span class="nc" id="L73">            Class[] types = new Class [] {</span>
                java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.Boolean.class, java.lang.Boolean.class, java.lang.String.class
            };
<span class="nc" id="L76">            boolean[] canEdit = new boolean [] {</span>
                false, false, false, false, false, true, false
            };

            public Class getColumnClass(int columnIndex) {
<span class="nc" id="L81">                return types [columnIndex];</span>
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
<span class="nc" id="L85">                return canEdit [columnIndex];</span>
            }
        });
<span class="nc" id="L88">        tableParticipantTableModel= (DefaultTableModel ) tableParticipant.getModel();</span>
<span class="nc" id="L89">        tableParticipant.setFillsViewportHeight(true);</span>
<span class="nc" id="L90">        tableParticipant.setRowSelectionAllowed(true);</span>
<span class="nc" id="L91">        paneTableScrollPane.setViewportView(tableParticipant);</span>

<span class="nc" id="L93">        javax.swing.GroupLayout panelTableLayout = new javax.swing.GroupLayout(panelTable);</span>
<span class="nc" id="L94">        panelTable.setLayout(panelTableLayout);</span>
<span class="nc" id="L95">        panelTableLayout.setHorizontalGroup(</span>
            panelTableLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(paneTableScrollPane, javax.swing.GroupLayout.DEFAULT_SIZE, 610, Short.MAX_VALUE)
        );
<span class="nc" id="L99">        panelTableLayout.setVerticalGroup(</span>
            panelTableLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelTableLayout.createSequentialGroup()
                .addComponent(paneTableScrollPane, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

<span class="nc" id="L106">        btnNewParticipant.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N</span>
<span class="nc" id="L107">        btnNewParticipant.setText(&quot;neuer Teilnehmer&quot;);</span>

<span class="nc" id="L109">        btnDeleteParticipant.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N</span>
<span class="nc" id="L110">        btnDeleteParticipant.setText(&quot;Teilnehmer l√∂schen&quot;);</span>
<span class="nc" id="L111">        btnDeleteParticipant.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L113">                btnDeleteParticipantActionPerformed(evt);</span>
<span class="nc" id="L114">            }</span>
        });

<span class="nc" id="L117">        btnEditParticipant.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N</span>
<span class="nc" id="L118">        btnEditParticipant.setText(&quot;Teilnehmer bearbeiten&quot;);</span>
<span class="nc" id="L119">        btnEditParticipant.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L121">                btnEditParticipantActionPerformed(evt);</span>
<span class="nc" id="L122">            }</span>
        });

<span class="nc" id="L125">        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);</span>
<span class="nc" id="L126">        this.setLayout(layout);</span>
<span class="nc" id="L127">        layout.setHorizontalGroup(</span>
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panelTable, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnNewParticipant, javax.swing.GroupLayout.PREFERRED_SIZE, 180, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(btnDeleteParticipant, javax.swing.GroupLayout.PREFERRED_SIZE, 180, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(btnEditParticipant, javax.swing.GroupLayout.PREFERRED_SIZE, 180, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
<span class="nc" id="L139">        layout.setVerticalGroup(</span>
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addComponent(panelTable, javax.swing.GroupLayout.DEFAULT_SIZE, 431, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnNewParticipant, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnDeleteParticipant, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnEditParticipant, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)))
        );
<span class="nc" id="L149">    }// &lt;/editor-fold&gt;//GEN-END:initComponents</span>

    private void btnEditParticipantActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEditParticipantActionPerformed
        // TODO add your handling code here:
<span class="nc" id="L153">    }//GEN-LAST:event_btnEditParticipantActionPerformed</span>

    private void btnDeleteParticipantActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDeleteParticipantActionPerformed
        // TODO add your handling code here:
<span class="nc" id="L157">    }//GEN-LAST:event_btnDeleteParticipantActionPerformed</span>
    
    private void initTable(){
        
        //load data
<span class="nc" id="L162">        ArrayList&lt;Data.LiveClasses.Participant&gt; allParticipants = this.actualEvent.getParticipants();</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">        for (Data.LiveClasses.Participant p:allParticipants){</span>
<span class="nc" id="L164">            Vector rowData = new Vector();</span>
<span class="nc" id="L165">            rowData.add(p.getId());</span>
<span class="nc" id="L166">            rowData.add(p.getName());</span>
<span class="nc" id="L167">            rowData.add(p.getPrename());</span>
<span class="nc" id="L168">            rowData.add(p.getNickname());</span>
<span class="nc" id="L169">            rowData.add(p.isPaid());</span>
<span class="nc" id="L170">            rowData.add(p.isPresent());</span>
            
<span class="nc" id="L172">            String registratedTournaments =&quot;&quot;;</span>
<span class="nc" id="L173">            ArrayList&lt;Tournament&gt; tournamentList = p.getTournaments();</span>
<span class="nc bnc" id="L174" title="All 2 branches missed.">            for (Tournament t:tournamentList){</span>
<span class="nc" id="L175">                registratedTournaments += t.getName();</span>
<span class="nc" id="L176">                registratedTournaments+= &quot;, &quot;;                </span>
<span class="nc" id="L177">            }            </span>
<span class="nc" id="L178">            rowData.add(registratedTournaments);</span>
            
<span class="nc" id="L180">            tableParticipantTableModel.addRow(rowData);</span>
<span class="nc" id="L181">        }</span>
        
        
<span class="nc" id="L184">    }</span>
    
    private void initListeners(){
        //Mouse handling
        /*tableParticipant.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);
                try {
                    getSelectedParticipant();
                    main.setEnabled(false);
                    View.InputPanes.ManipulateParticipant f = new ManipulateParticipant(main, ManipulateParticipant.state.modifyParticipant);
                    f.addWindowListener(new WindowAdapter() {
                        @Override
                        public void windowClosing(WindowEvent e){
                            main.setEnabled(true);
                        }
                    });  
                } catch (Exception e){}
            }
        });*/
        
<span class="nc" id="L206">        btnNewParticipant.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent ae) {
<span class="nc" id="L210">                main.setEnabled(false);</span>
<span class="nc" id="L211">                View.InputPanes.ManipulateParticipant f = new ManipulateParticipant(main, ManipulateParticipant.state.addParticipant);</span>
<span class="nc" id="L212">                f.addWindowListener(new WindowAdapter() {</span>
                    @Override
                    public void windowClosing(WindowEvent e){
<span class="nc" id="L215">                        main.setEnabled(true);</span>
<span class="nc" id="L216">                    }</span>
                });
<span class="nc" id="L218">            }</span>
        });
        
<span class="nc" id="L221">        btnEditParticipant.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
<span class="nc" id="L226">                    getSelectedParticipant();</span>
<span class="nc" id="L227">                    main.setEnabled(false);</span>
<span class="nc" id="L228">                    View.InputPanes.ManipulateParticipant f = new ManipulateParticipant(main, ManipulateParticipant.state.modifyParticipant);</span>
<span class="nc" id="L229">                    f.addWindowListener(new WindowAdapter() {</span>
                        @Override
                        public void windowClosing(WindowEvent e){
<span class="nc" id="L232">                            main.setEnabled(true);</span>
<span class="nc" id="L233">                        }</span>
                    });  
<span class="nc" id="L235">                } catch (Exception e){}</span>
<span class="nc" id="L236">            }</span>
        });
        
<span class="nc" id="L239">        btnDeleteParticipant.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
<span class="nc" id="L244">                    main.getActualEvent().deleteParticipant(getSelectedParticipant());</span>
<span class="nc" id="L245">                    updateList();</span>
<span class="nc" id="L246">                    return;</span>
<span class="nc" id="L247">                } catch (SQLException ex) {</span>
<span class="nc" id="L248">                    Logger.getLogger(Administrate.class.getName()).log(Level.SEVERE, null, ex);</span>
                }                        
<span class="nc" id="L250">                </span>
<span class="nc" id="L251">                JOptionPane.showMessageDialog(null, &quot;Teilnehmer konnte nicht gefunden werden&quot;);</span>
<span class="nc" id="L252">            }</span>
        });
        
<span class="nc" id="L255">    }</span>
    
    public void updateList() {
<span class="nc" id="L258">        removeAllListEntrys();</span>
<span class="nc" id="L259">        ArrayList&lt;Data.LiveClasses.Participant&gt; allParticipants = main.getActualEvent().getParticipants();</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">        for (Data.LiveClasses.Participant p:allParticipants){</span>
<span class="nc" id="L261">            tableParticipantTableModel.addRow(new Object[] {p.getStartnumber(), p.getName(), p.getPrename(),</span>
                p.getNickname(), p.isPaid(), p.isPresent(), p.getTournaments().toString()});
<span class="nc" id="L263">        }</span>
<span class="nc" id="L264">    }</span>
    
    private void removeAllListEntrys(){
<span class="nc bnc" id="L267" title="All 2 branches missed.">        for (int i = tableParticipantTableModel.getRowCount()-1; i &gt;= 0;  i--){</span>
<span class="nc" id="L268">            tableParticipantTableModel.removeRow(i);</span>
        }        
<span class="nc" id="L270">    }</span>
    
    public Data.LiveClasses.Participant getSelectedParticipant(){
        
<span class="nc" id="L274">        int selectedRow = tableParticipant.getSelectedRow();</span>
<span class="nc" id="L275">        String selectedStartnumber = (String)tableParticipantTableModel.getValueAt(selectedRow, 0);</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">        for (Data.LiveClasses.Participant pa:main.getActualEvent().getParticipants()){</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">            if (pa.getStartnumber().equals(selectedStartnumber)){</span>
<span class="nc" id="L278">                return pa;</span>
            }                        
<span class="nc" id="L280">        }</span>
<span class="nc" id="L281">        return null;</span>
    }
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnDeleteParticipant;
    private javax.swing.JButton btnEditParticipant;
    private javax.swing.JButton btnNewParticipant;
    private javax.swing.JScrollPane paneTableScrollPane;
    private javax.swing.JPanel panelTable;
    private javax.swing.JTable tableParticipant;
    // End of variables declaration//GEN-END:variables
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span></div></body></html>